# Running Tests

This repository includes tests to ensure the correctness of the code. Follow the steps below to run the tests locally.

## Installation

1. Clone the repository to your local machine:

    ```bash
    git clone https://github.com/yorku-ease/DataMigrationBenchmarkingTool.git
    ```

2. Change to the project directory:

    ```bash
    cd DataMigrationBenchmarkingTool

    ```


## Config Parser Test

This test checks if the controller parses the `config.ini` file correctly and generates the expected `MigrationEngineconfig.ini`.

### Prerequisites


Make sure you have the following installed on your machine:

- [Python](https://www.python.org/) 

1. Change to the project directory:

    ```bash
    cd controller

    ```

3. Install dependencies:

    ```bash

    pip install -r requirements.txt

    ```


### Running Tests

1. Change to the project directory:

    ```bash
    cd tests

    ```

2. Execute the tests:

    ```bash
    python -m unittest testController.py

    ```

2. Verify that all tests pass without errors.

## Container Deployment Test

This test checks if the controller deploys the migration engine correctly on a Docker container.

### Prerequisites


Make sure you have the following installed on your machine:

- [Docker](https://docs.docker.com/engine/install//) ( make sure that it is running)
- [Python](https://www.python.org/) 


1. Change to the project directory:

    ```bash
    cd deployment/controller/tests

    ```

3. Install dependencies:

    ```bash

    pip install -r requirements.txt

    ```


### Running Tests

1. Execute the tests:

    ```bash
    python -m unittest testDeployment.py

    ```

2. Verify that all tests pass without errors.

## Kafka Logger Test

This test generates fake data, submits it to Kafka, and checks if Kafka receives the data and logs it correctly.

### Prerequisites


Make sure you have the following installed on your machine:

- [Docker](https://docs.docker.com/engine/install//) ( make sure that it is running)
- [Python](https://www.python.org/) 


1. Change to the project directory:

    ```bash
    cd deployment/reporter/kafkacluster

    ```

3. Install dependencies:

    ```bash

    pip install -r requirements.txt

    ```
4. Change to the project directory:

    ```bash
    cd test

    ```

### Running Tests

1. Execute the tests:

    ```bash
    python -m unittest testLogger.py

    ```

2. Verify that all tests pass without errors.

## Kafka Parser Test

This test provides logs to the Kafka parser, a Python script, and checks whether it parses the logs correctly.

### Prerequisites


Make sure you have the following installed on your machine:

- [Python](https://www.python.org/) 

1. Change to the project directory:

    ```bash
    cd deployment/reporter

    ```

3. Install dependencies:

    ```bash

    pip install -r kafkacluster/requirements.txt

    ```
4. Change to the project directory:

    ```bash
    cd logsParser/unitTest

    ```

### Running Tests

1. Execute the tests:

    ```bash
    python -m unittest TestLogTransformation.py

    ```

2. Verify that all tests pass without errors.
## Experiment Logging to Kafka and Default Engine Tests


The test involves running the controller and checking if it logs to Kafka correctly. This ensures that the logging functionality is working as expected. The success of the test is determined by verifying that Kafka receives the logs generated by the controller.

The test also involves running the default engine and checking if it functions as expected. This ensures that the default engine meets the required specifications and behaves correctly under normal conditions.


### Prerequisites


Make sure you have the following installed on your machine:

- [Python](https://www.python.org/)
- [Docker](https://docs.docker.com/engine/install//) ( make sure that it is running)


1. Change to the project directory:

    ```bash
    cd deployment

    ```

3. Install dependencies:

    ```bash

    pip install -r reporter/kafkacluster/requirements.txt

    ```
4. Change to the project directory:

    ```bash
    cd tests

    ```
5. edit `configs/config.ini` according to the comments in `config.ini` file 



### Running Tests

1. Execute the tests:

    ```bash
    python -m unittest testDeployment.py

    ```

2. Verify that all tests pass without errors.